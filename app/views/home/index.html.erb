<div class="fast-freddy">

</div>
<% content_for :templates do %>
  <script type="text/template" id="products-template">
    <ul id="products" class="inline product-listing">
    </ul>
  </script>

  <script type="text/template" id="product-preview-template">
      <li id="product_<%%= id %>" class="columns three alpha" itemscope itemtype="http://schema.org/Product">
      <div class="product-image">
        <img src='<%%= small_image_url() %>'>
      </div>
      <a class='info' itemprop='name' title='<%%= name %>'><%%= name %></a>
      <span class="price selling" itemprop="price"><%%= display_price %></span>
    </li>
  </script>

  <script type="text/template" id="product-template">
    <div class="columns six alpha" data-hook="product_left_part">
      <div class="row" data-hook="product_left_part_wrap">

        <div id="product-images" data-hook="product_images">
          <div id="main-image" data-hook="">
              <img alt="<%%= name %>" itemprop="image" src="<%%= product_image_url() %>">
          </div>
          <div id="thumbnails" data-hook="">
            <ul id="product-thumbnails" class="thumbnails inline" data-hook="">
              <%% _.each(thumbnails(), function(thumbnail) { %>
                <li class='tmb-all'><img src='<%%= thumbnail %>'></li>
              <%% }) %>
            </ul>
          </div>
          <div data-hook="product_properties">
            <h6 class="product-section-title">Properties</h6>
            <table id="product-properties" class="table-display" data-hook="">
              <tbody>
                <%% var pedal = _.cycle(["odd", "even"]); %>
                <%% _.each(product_properties, function(property) { %>
                  <tr class="<%%= pedal() %>"> 
                    <td><strong><%%= property.property_name %></strong></td>
                    <td><%%= property.value %></td>
                  </tr>
                <%% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="columns ten omega" data-hook="product_right_part">
      <div class="row" data-hook="product_right_part_wrap">
        <div id="product-description" data-hook="product_description">
          <h1 class="product-title" itemprop="name"><%%= name %></h1>
          <div itemprop="description" data-hook="description">
            <%%= description %>
          </div>
          <div id="inside-product-cart-form" data-hook="inside_product_cart_form" itemprop="offers" itemscope="" itemtype="http://schema.org/Offer">
              <div data-hook="product_price" class="columns five alpha">
                
                <div id="product-price">
                  <h6 class="product-section-title">Price</h6>
                  <div><span class="price selling" itemprop="price"><%%= display_price %></span></div>
                </div>
                <div class='add-to-cart'>
                  <input class="title" id="variants_2" min="1" name="variants[2]" type="number" value="1">
                  <button class="large primary" id="add-to-cart-button" type="submit">
                    Add To Cart
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </script>

  <script type='text/template' id='cart-template'>
    Cart: (<%%= total_quantity %>) <span class='amount'><%%= display_item_total %></span>
  </script>
<% end %>
<script>
  $(document).ready(function() {
    if (SpreeStore.current_order_id) {
      $('#link-to-cart').html("<a href='#'><%= Spree.t(:cart) %>: <img src='/assets/loading.gif'></a>")
    } else {
      $('#link-to-cart').html("<a href='#'><%= Spree.t(:cart) %>: <%= Spree.t(:empty) %></a>")
    }
    SpreeStore.start();
  })
</script>